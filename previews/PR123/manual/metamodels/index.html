<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Metamodelling · UncertaintyQuantification.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">UncertaintyQuantification.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../gettingstarted/">Getting Started</a></li><li><a class="tocitem" href="../reliability/">Reliability Analysis</a></li><li class="is-active"><a class="tocitem" href>Metamodelling</a><ul class="internal"><li><a class="tocitem" href="#Design-Of-Experiments"><span>Design Of Experiments</span></a></li><li><a class="tocitem" href="#Response-Surface"><span>Response Surface</span></a></li></ul></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/responsesurface/">Response Surface</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../../api/inputs/">Inputs</a></li><li><a class="tocitem" href="../../api/parameter/">Parameter</a></li><li><a class="tocitem" href="../../api/randomvariable/">RandomVariable</a></li><li><a class="tocitem" href="../../api/responsesurface/">ResponseSurface</a></li><li><a class="tocitem" href="../../api/polyharmonicspline/">PolyharmonicSpline</a></li><li><a class="tocitem" href="../../api/simulations/">Simulations</a></li></ul></li><li><a class="tocitem" href="../../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Metamodelling</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Metamodelling</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/FriesischScott/UncertaintyQuantification.jl/blob/master/docs/src/manual/metamodels.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Metamodels"><a class="docs-heading-anchor" href="#Metamodels">Metamodels</a><a id="Metamodels-1"></a><a class="docs-heading-anchor-permalink" href="#Metamodels" title="Permalink"></a></h1><h2 id="Design-Of-Experiments"><a class="docs-heading-anchor" href="#Design-Of-Experiments">Design Of Experiments</a><a id="Design-Of-Experiments-1"></a><a class="docs-heading-anchor-permalink" href="#Design-Of-Experiments" title="Permalink"></a></h2><p>Design Of Experiments (DOE) offers various designs that can be used for creating a model of a given system. The core idea is to evaluate significant points of the system in order to obtain a sufficient model while keeping the effort to achieve this relatively low. Depending on the parameters, their individual importance and interconnections, different designs may be adequate.</p><p>The ones implemented here are <code>TwoLevelFactorial</code>, <code>FullFactorial</code>, <code>FractionalFactorial</code>, <code>CentralComposite</code>, <code>BoxBehnken</code> and <code>PlackettBurman</code>.</p><h2 id="Response-Surface"><a class="docs-heading-anchor" href="#Response-Surface">Response Surface</a><a id="Response-Surface-1"></a><a class="docs-heading-anchor-permalink" href="#Response-Surface" title="Permalink"></a></h2><p>A Response Surface is a simple polynomial surrogate model. It can be trained by providing it with evaluated points of a function or any of the aforementioned experimental designs.</p><h3 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h3><p>In this example, we will model the following test function (known as Himmelblau&#39;s function) in the range <span>$x1, x2 ∈ [-5, 5]$</span>. It is defined as</p><p><span>$f(x1, x2) = (x1^2 + x2 - 11)^2 + (x1 + x2^2 - 7)^2$</span>.</p><p><img src="metamodels_himmelblau.png" alt="Image"/></p><p>We start by creating the random variables representing the inputs. These also define the domain over which the experimental designs are spread. We also define the original model using Himmelblau&#39;s function</p><pre><code class="language-julia hljs">x = RandomVariable.(Uniform(-5, 5), [:x1, :x2])

himmelblau = Model(df -&gt; (df.x1 .^2 .+ df.x2 .- 11) .^2 .+ (df.x1 .+ df.x2 .^2 .- 7) .^2, :y)</code></pre><p>Our next step is to choose the design we want to use. In this example, we are applying a <code>FullFactorial</code> design with 5 levels in each dimension:</p><pre><code class="language-julia hljs">design = FullFactorial([5, 5])</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">FullFactorial([5, 5], 1)</code></pre><p>After that, we call the sample function with our design. This produces a <code>DataFrame</code> containing the points of our design spread over the range defined by the <code>RandomVariable</code>s. We then evaluate the model at these points and use the resulting data to train the <code>ResponseSurface</code>. The <code>ResponseSurface</code> uses least squares regression to fit a polynomial model to the given data points. The maximum polynomial degree is set in the <code>ResponseSurface</code> constructor.</p><blockquote><p><strong><em>NOTE:</em></strong> The choice of the degree and the design and its parameters may be crucial to obtaining a sufficient model.</p></blockquote><pre><code class="language-julia hljs">training_data = sample(x, design)
evaluate!(himmelblau, training_data)
rs = ResponseSurface(training_data, :y, 4)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ResponseSurface([170.00000000000006, -22.00000000000004, -14.000000000000043, -12.999999999999996, 1.397520308416854e-14, -21.00000000000001, 8.544945885634891e-16, 2.0000000000000013, 2.0000000000000018, 1.8716003837211143e-15, 0.9999999999999998, -1.3786616962959575e-16, -1.4301330660281365e-16, -6.626246385393779e-16, 1.0], :y, [:x1, :x2], 4, DynamicPolynomials.Monomial{DynamicPolynomials.Commutative{DynamicPolynomials.CreationOrder}, MultivariatePolynomials.Graded{MultivariatePolynomials.LexOrder}}[1, x₂, x₁, x₂², x₁x₂, x₁², x₂³, x₁x₂², x₁²x₂, x₁³, x₂⁴, x₁x₂³, x₁²x₂², x₁³x₂, x₁⁴])</code></pre><p>To evaluate the <code>ResponseSurface</code> run <code>evaluate!(rs::ResponseSurface, data::DataFrame)</code> with the <code>Dataframe</code> containing the points you want to evaluate. We validate the model by sampling 200 random points from the inputs and computing the mean squared error between the true model and the <code>ResponseSurface</code>.</p><pre><code class="language-julia hljs">validation_data = sample(x, 200)
evaluate!(rs, validation_data)

y_h = himmelblau(validation_data)

mse = mean((y_h .- validation_data.y).^2)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">1.7508785544602586e-26</code></pre><p>The mse of <span>$1e26$</span> proves the accuracy of the metamodel. The following Figure compares the <code>ResponseSurface</code> to the true model over the entire domain.</p><p><img src="metamodels_rs.png" alt="Image"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../reliability/">« Reliability Analysis</a><a class="docs-footer-nextpage" href="../../examples/responsesurface/">Response Surface »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Thursday 27 July 2023 13:08">Thursday 27 July 2023</span>. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
